<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="jquery.min.js"></script>
    <link rel="stylesheet" href="bootstrap.min.css">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.bundle.min.js'></script>
    <title>FipeRama</title>
</head>

<body style="background-image: url('img/corsa.png'); background-repeat: no-repeat; background-attachment:fixed; background-size:cover;">

    <header>

        <div class="row" style="background-color: #EE8695;">
            <div class="col-2">
                <img src="img/piston.png" alt="logo.png" width="60px" style="margin-left: 40%; margin-top: 10px; margin-bottom: 5px;">
            </div>
            <div class="col-10" style="padding-top: 15px; padding-right: 5%;">
                <nav style="text-align: right; ">
                    <a href="index.html">Home</a> |
                    <a href="https://github.com/izaelgs" target="_blank">Outros Projetos</a> |
                    <a href="sobre.html">Sobre</a> </nav>
            </div>
            <div style="background-color: #c06371; width: 100%; height: 5px;">
                <hr>
            </div>
        </div>
    </header>

    <div id="conteudo" style="text-align: center; max-width: 1280px; margin: auto; color: #FB9DAD; text-shadow: 1px 1px #2e1b1e;">
        <h1>Bem Vindo</h1>
        <h2>Selecione a marca: </h2>
        <select class="form-control" id="selMarcas" onchange="getCarros()">
    </select>
        <br>
        <div style="text-align: right;">
            <button class="btn btn-primary" onclick="limpaCampos()">Limpar</button>
        </div>
        <table class="table table-striped table-dark">
            <thead>
                <tr>
                    <th>Lista de Carros</th>
                </tr>
            </thead>
            <tbody id="carro"></tbody>
            <br>

        </table>
    </div>

    <script>
        var selMarcas = $('#selMarcas');
        var carro = $('#carro');

        function getMarcas() {
            var url = "http://fipeapi.appspot.com/api/1/carros/marcas.json";
            console.clear();

            $.get(url, null, function(r) {
                for (var i = 0; i < r.length; i++) {
                    selMarcas.append('<option value="' + r[i].id + '">' + r[i].name + '</option>');

                };
            });
        }

        function getCarros() {
            var idMarca = selMarcas.val();
            var url = "http://fipeapi.appspot.com/api/1/carros/veiculos/" + idMarca + ".json";
            console.clear();
            carro.html('');

            console.log(url);
            $.get(url, null, function(r) {
                console.log(selMarcas.val());
                console.log(r);
                for (var i = 0; i < r.length; i++) {
                    carro.append('<tr><td>' + r[i].name + '</td></tr>');
                };
            });
        }

        function limpaCampos() {
            console.clear('');
            selMarcas.val('');
            carro.html('');
        }

        getMarcas();

        $(function() {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>

</body>

</html>